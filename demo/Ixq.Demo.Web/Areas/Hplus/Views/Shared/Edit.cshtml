@using Ixq.Core.Entity
@using Ixq.UI
@model IPageEditViewModel
@{
    Layout = "~/Areas/Hplus/Views/Shared/_LayoutHplusIframe.cshtml";
    var entityName = Model.EntityDto.GetType().Name;
}
@section styles{
    @Html.RenderStyles()
}

<div class="wrapper wrapper-content animated fadeIn">
    <div class="row">
        <div class="col-sm-12">
            <div class="ibox float-e-margins">
                <div class="ibox-content">
                    @using (Ajax.BeginForm(Ajax.RouteCollection.GetRouteData(this.Context).GetRequiredString("Action"), null,
                            new AjaxOptions
                            {
                                HttpMethod = "POST",
                                AllowCache = false
                            },
                            new
                            {
                                @class = "form-horizontal m-t",
                                @id = entityName + "_from",
                                enctype = "multipart/form-data"
                            }))
                    {
                        @Html.AntiForgeryToken()
                        foreach (IEntityPropertyMetadata item in Model.PropertyMenberInfo)
                        {
                            @Html.PropertyEditor(item, Model.EntityDto)
                        }
                        <div class="form-group">
                            <div class="col-sm-4 col-sm-offset-3">
                                <button class="btn btn-primary" type="submit">提交</button>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
</div>
@section scripts{
    <script src="~/Content/Hplus/js/plugins/validate/jquery.validate.min.js"></script>
    <script src="~/Content/Hplus/js/plugins/validate/messages_zh.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
    <script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>
    @Html.RenderScripts()
    <script>
        $().ready(function() {
            $("#@(entityName)_from").validate();
        });
    </script>
}